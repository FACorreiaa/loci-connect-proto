{
  "swagger": "2.0",
  "info": {
    "title": "proto/recents.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "RecentsService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {},
  "definitions": {
    "ai_poirecentsv1RecentInteraction": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "userId": {
          "type": "string"
        },
        "interactionType": {
          "$ref": "#/definitions/v1InteractionType"
        },
        "entityId": {
          "type": "string",
          "description": "POI ID, City ID, etc."
        },
        "entityType": {
          "type": "string",
          "title": "\"poi\", \"city\", \"itinerary\", \"search\""
        },
        "entityName": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "cityId": {
          "type": "string"
        },
        "cityName": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "context": {
          "$ref": "#/definitions/v1InteractionContext"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "Recent interaction entity"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "recentsv1CityInteractions": {
      "type": "object",
      "properties": {
        "cityId": {
          "type": "string"
        },
        "cityName": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "countryCode": {
          "type": "string"
        },
        "totalInteractions": {
          "type": "integer",
          "format": "int32"
        },
        "searches": {
          "type": "integer",
          "format": "int32"
        },
        "favorites": {
          "type": "integer",
          "format": "int32"
        },
        "itinerariesCreated": {
          "type": "integer",
          "format": "int32"
        },
        "poisViewed": {
          "type": "integer",
          "format": "int32"
        },
        "firstInteraction": {
          "type": "string",
          "format": "date-time"
        },
        "lastInteraction": {
          "type": "string",
          "format": "date-time"
        },
        "topCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "preferences": {
          "$ref": "#/definitions/v1CityPreferences"
        }
      },
      "title": "City interactions summary"
    },
    "recentsv1GetRecentInteractionsResponse": {
      "type": "object",
      "properties": {
        "interactions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ai_poirecentsv1RecentInteraction"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "citySummaries": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1CityInteractionSummary"
          },
          "title": "When group_by_city is true"
        },
        "analytics": {
          "$ref": "#/definitions/v1InteractionAnalytics"
        }
      }
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1CityInsights": {
      "type": "object",
      "properties": {
        "discoveryPattern": {
          "type": "string",
          "title": "\"explorer\", \"focused\", \"returner\""
        },
        "suggestedCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "unexploredAreas": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "engagementScore": {
          "type": "number",
          "format": "double",
          "title": "0-100"
        },
        "visitFrequency": {
          "type": "string",
          "title": "\"first_time\", \"occasional\", \"frequent\""
        }
      },
      "title": "Insights about user behavior in a city"
    },
    "v1CityInteractionSummary": {
      "type": "object",
      "properties": {
        "cityId": {
          "type": "string"
        },
        "cityName": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "interactionCount": {
          "type": "integer",
          "format": "int32"
        },
        "latestInteraction": {
          "type": "string",
          "format": "date-time"
        },
        "recentInteractions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ai_poirecentsv1RecentInteraction"
          },
          "title": "Limited to most recent"
        }
      },
      "title": "Summary of interactions by city"
    },
    "v1CityPreferences": {
      "type": "object",
      "properties": {
        "preferredCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "preferredPriceRange": {
          "type": "string"
        },
        "preferredRadiusMeters": {
          "type": "number",
          "format": "double"
        },
        "preferredTimeOfDay": {
          "type": "string"
        },
        "avoidedCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "User preferences for a city based on interactions"
    },
    "v1FrequentPlace": {
      "type": "object",
      "properties": {
        "placeId": {
          "type": "string"
        },
        "placeName": {
          "type": "string"
        },
        "placeType": {
          "type": "string",
          "title": "\"poi\", \"city\", \"area\""
        },
        "category": {
          "type": "string"
        },
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "cityName": {
          "type": "string"
        },
        "visitCount": {
          "type": "integer",
          "format": "int32"
        },
        "interactionCount": {
          "type": "integer",
          "format": "int32"
        },
        "firstVisit": {
          "type": "string",
          "format": "date-time"
        },
        "lastVisit": {
          "type": "string",
          "format": "date-time"
        },
        "visitFrequencyScore": {
          "type": "number",
          "format": "double",
          "title": "Algorithm-calculated frequency score"
        },
        "interactionTypes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1InteractionType"
          }
        }
      },
      "title": "Frequent place information"
    },
    "v1FrequentPlaceInsights": {
      "type": "object",
      "properties": {
        "travelPattern": {
          "type": "string",
          "title": "\"local_explorer\", \"city_hopper\", \"neighborhood_focused\""
        },
        "favoriteCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "explorationDiversityScore": {
          "type": "number",
          "format": "double",
          "title": "0-100, higher = more diverse"
        },
        "loyaltyLevel": {
          "type": "string",
          "title": "\"low\", \"medium\", \"high\""
        },
        "recommendedNewPlaces": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "Insights about user's frequent places"
    },
    "v1GeoLocation": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "city": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "accuracy": {
          "type": "number",
          "format": "double",
          "title": "in meters"
        }
      },
      "title": "Geographic location"
    },
    "v1GetCityInteractionsResponse": {
      "type": "object",
      "properties": {
        "cityInteractions": {
          "$ref": "#/definitions/recentsv1CityInteractions"
        },
        "detailedInteractions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ai_poirecentsv1RecentInteraction"
          },
          "title": "When include_details is true"
        },
        "insights": {
          "$ref": "#/definitions/v1CityInsights"
        }
      }
    },
    "v1GetFrequentPlacesResponse": {
      "type": "object",
      "properties": {
        "places": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1FrequentPlace"
          }
        },
        "insights": {
          "$ref": "#/definitions/v1FrequentPlaceInsights"
        }
      }
    },
    "v1GetInteractionHistoryResponse": {
      "type": "object",
      "properties": {
        "interactions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ai_poirecentsv1RecentInteraction"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "analytics": {
          "$ref": "#/definitions/v1InteractionAnalytics"
        },
        "trends": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1TrendData"
          },
          "title": "Historical trends"
        }
      }
    },
    "v1InteractionAnalytics": {
      "type": "object",
      "properties": {
        "totalInteractionsToday": {
          "type": "integer",
          "format": "int32"
        },
        "totalInteractionsThisWeek": {
          "type": "integer",
          "format": "int32"
        },
        "uniqueCitiesVisited": {
          "type": "integer",
          "format": "int32"
        },
        "topCategories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "mostActiveTimeOfDay": {
          "type": "string"
        },
        "averageInteractionsPerDay": {
          "type": "number",
          "format": "double"
        }
      },
      "title": "Analytics for the interactions"
    },
    "v1InteractionContext": {
      "type": "object",
      "properties": {
        "sourcePage": {
          "type": "string",
          "title": "\"discover\", \"search\", \"chat\", \"recommendations\""
        },
        "userAgent": {
          "type": "string"
        },
        "deviceType": {
          "type": "string",
          "title": "\"mobile\", \"tablet\", \"desktop\""
        },
        "location": {
          "$ref": "#/definitions/v1GeoLocation"
        },
        "sessionId": {
          "type": "string"
        },
        "referrer": {
          "type": "string"
        },
        "customProperties": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "title": "Context of the interaction"
    },
    "v1InteractionFilter": {
      "type": "object",
      "properties": {
        "interactionTypes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1InteractionType"
          }
        },
        "entityTypes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "cityId": {
          "type": "string"
        },
        "startDate": {
          "type": "string",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "format": "date-time"
        },
        "searchQuery": {
          "type": "string"
        },
        "categories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "Interaction filters"
    },
    "v1InteractionType": {
      "type": "string",
      "enum": [
        "INTERACTION_TYPE_UNSPECIFIED",
        "INTERACTION_TYPE_SEARCH",
        "INTERACTION_TYPE_VIEW",
        "INTERACTION_TYPE_FAVORITE",
        "INTERACTION_TYPE_UNFAVORITE",
        "INTERACTION_TYPE_SAVE_ITINERARY",
        "INTERACTION_TYPE_CREATE_LIST",
        "INTERACTION_TYPE_CHAT",
        "INTERACTION_TYPE_DISCOVERY",
        "INTERACTION_TYPE_RECOMMENDATION_CLICK",
        "INTERACTION_TYPE_BOOKING_ATTEMPT"
      ],
      "default": "INTERACTION_TYPE_UNSPECIFIED",
      "title": "Types of interactions"
    },
    "v1InteractionTypeCount": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/v1InteractionType"
        },
        "count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1RecordInteractionResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "interactionId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "v1TrendData": {
      "type": "object",
      "properties": {
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "interactionCount": {
          "type": "integer",
          "format": "int32"
        },
        "typeBreakdown": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1InteractionTypeCount"
          }
        }
      },
      "title": "Trend data for interactions over time"
    }
  }
}
