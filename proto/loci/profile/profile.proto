syntax = "proto3";

package loci.profile;

option go_package = "github.com/FACorreiaa/loci-connect-proto/gen/go/loci/profile;profile";


import "buf/validate/validate.proto";
import "google/protobuf/timestamp.proto";
import "loci/common/common.proto";
import "loci/interest/interest.proto";

// Enums for preferences
enum DayPreference {
  DAY_PREFERENCE_UNSPECIFIED = 0;
  DAY_PREFERENCE_ANY = 1;
  DAY_PREFERENCE_DAY = 2;
  DAY_PREFERENCE_NIGHT = 3;
}

enum SearchPace {
  SEARCH_PACE_UNSPECIFIED = 0;
  SEARCH_PACE_ANY = 1;
  SEARCH_PACE_RELAXED = 2;
  SEARCH_PACE_MODERATE = 3;
  SEARCH_PACE_FAST = 4;
}

enum TransportPreference {
  TRANSPORT_PREFERENCE_UNSPECIFIED = 0;
  TRANSPORT_PREFERENCE_ANY = 1;
  TRANSPORT_PREFERENCE_WALK = 2;
  TRANSPORT_PREFERENCE_PUBLIC = 3;
  TRANSPORT_PREFERENCE_CAR = 4;
}

// AccommodationPreferences represents accommodation-specific filters
message AccommodationPreferences {
  string id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string user_preference_id = 2 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  repeated string accommodation_type = 3 [(buf.validate.field).repeated = {
    max_items: 10,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional loci.common.RangeFilter star_rating = 4;
  optional loci.common.RangeFilter price_range_per_night = 5;
  repeated string amenities = 6 [(buf.validate.field).repeated = {
    max_items: 30,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string room_type = 7 [(buf.validate.field).repeated = {
    max_items: 10,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional string chain_preference = 8 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  repeated string cancellation_policy = 9 [(buf.validate.field).repeated = {
    max_items: 5,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional string booking_flexibility = 10 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  google.protobuf.Timestamp created_at = 11 [(buf.validate.field).required = true];
  google.protobuf.Timestamp updated_at = 12 [(buf.validate.field).required = true];
}

// DiningPreferences represents dining-specific filters
message DiningPreferences {
  string id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string user_preference_id = 2 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  repeated string cuisine_types = 3 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string meal_types = 4 [(buf.validate.field).repeated = {
    max_items: 10,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string service_style = 5 [(buf.validate.field).repeated = {
    max_items: 10,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional loci.common.RangeFilter price_range_per_person = 6;
  repeated string dietary_needs = 7 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string allergen_free = 8 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  bool michelin_rated = 9;
  bool local_recommendations = 10;
  optional string chain_vs_local = 11 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  bool organic_preference = 12;
  bool outdoor_seating_preferred = 13;
  google.protobuf.Timestamp created_at = 14 [(buf.validate.field).required = true];
  google.protobuf.Timestamp updated_at = 15 [(buf.validate.field).required = true];
}

// ActivityPreferences represents activity-specific filters
message ActivityPreferences {
  string id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string user_preference_id = 2 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  repeated string activity_categories = 3 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional string physical_activity_level = 4 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string indoor_outdoor_preference = 5 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string cultural_immersion_level = 6 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string must_see_vs_hidden_gems = 7 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  bool educational_preference = 8;
  bool photography_opportunities = 9;
  repeated string season_specific_activities = 10 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  bool avoid_crowds = 11;
  repeated string local_events_interest = 12 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  google.protobuf.Timestamp created_at = 13 [(buf.validate.field).required = true];
  google.protobuf.Timestamp updated_at = 14 [(buf.validate.field).required = true];
}

// ItineraryPreferences represents itinerary planning-specific filters
message ItineraryPreferences {
  string id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string user_preference_id = 2 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  optional string planning_style = 3 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string preferred_pace = 4 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string time_flexibility = 5 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string morning_vs_evening = 6 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string weekend_vs_weekday = 7 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  repeated string preferred_seasons = 8 [(buf.validate.field).repeated = {
    max_items: 4,
    items: {string: {min_len: 1, max_len: 50}}
  }];
  bool avoid_peak_season = 9;
  optional string adventure_vs_relaxation = 10 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  optional string spontaneous_vs_planned = 11 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
  google.protobuf.Timestamp created_at = 12 [(buf.validate.field).required = true];
  google.protobuf.Timestamp updated_at = 13 [(buf.validate.field).required = true];
}

// UserPreferenceProfile represents a user's preference profile
message UserPreferenceProfile {
  string id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string user_id = 2 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  string profile_name = 3 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  bool is_default = 4;
  double search_radius_km = 5 [(buf.validate.field).double = {gte: 0}];
  DayPreference preferred_time = 6 [(buf.validate.field).enum = {defined_only: true}];
  int32 budget_level = 7 [(buf.validate.field).int32 = {gte: 0, lte: 10}];
  SearchPace preferred_pace = 8;
  bool prefer_accessible_pois = 9;
  bool prefer_outdoor_seating = 10;
  bool prefer_dog_friendly = 11;
  repeated string preferred_vibes = 12 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  TransportPreference preferred_transport = 13 [(buf.validate.field).enum = {defined_only: true}];
  repeated string dietary_needs = 14 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated loci.interest.Interest interests = 15;
  repeated loci.interest.Tags tags = 16;
  optional double user_latitude = 17 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    double: {gte: -90, lte: 90}
  }];
  optional double user_longitude = 18 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    double: {gte: -180, lte: 180}
  }];
  optional AccommodationPreferences accommodation_preferences = 19;
  optional DiningPreferences dining_preferences = 20;
  optional ActivityPreferences activity_preferences = 21;
  optional ItineraryPreferences itinerary_preferences = 22;
  google.protobuf.Timestamp created_at = 23 [(buf.validate.field).required = true];
  google.protobuf.Timestamp updated_at = 24 [(buf.validate.field).required = true];
}

// CreateUserPreferenceProfileRequest for creating a preference profile
message CreateUserPreferenceProfileRequest {
  string profile_name = 1 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  optional bool is_default = 2;
  optional double search_radius_km = 3 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    double: {gte: 0}
  }];
  optional DayPreference preferred_time = 4 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  optional int32 budget_level = 5 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    int32: {gte: 0, lte: 10}
  }];
  optional SearchPace preferred_pace = 6 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  optional bool prefer_accessible_pois = 7;
  optional bool prefer_outdoor_seating = 8;
  optional bool prefer_dog_friendly = 9;
  repeated string preferred_vibes = 10 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional TransportPreference preferred_transport = 11 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  repeated string dietary_needs = 12 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string tag_ids = 13 [(buf.validate.field).repeated = {
    max_items: 30,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string interest_ids = 14 [(buf.validate.field).repeated = {
    max_items: 50,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional AccommodationPreferences accommodation_preferences = 15;
  optional DiningPreferences dining_preferences = 16;
  optional ActivityPreferences activity_preferences = 17;
  optional ItineraryPreferences itinerary_preferences = 18;
}

// UpdateUserPreferenceProfileRequest for updating a preference profile
message UpdateUserPreferenceProfileRequest {
  string profile_id = 1 [(buf.validate.field).string = {min_len: 1, max_len: 100}];
  optional string profile_name = 2 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 200}
  }];
  optional bool is_default = 3;
  optional double search_radius_km = 4 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    double: {gte: 0}
  }];
  optional DayPreference preferred_time = 5 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  optional int32 budget_level = 6 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    int32: {gte: 0, lte: 10}
  }];
  optional SearchPace preferred_pace = 7 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  optional bool prefer_accessible_pois = 8;
  optional bool prefer_outdoor_seating = 9;
  optional bool prefer_dog_friendly = 10;
  repeated string preferred_vibes = 11 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional TransportPreference preferred_transport = 12 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    enum: {defined_only: true}
  }];
  repeated string dietary_needs = 13 [(buf.validate.field).repeated = {
    max_items: 20,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string tag_ids = 14 [(buf.validate.field).repeated = {
    max_items: 30,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  repeated string interest_ids = 15 [(buf.validate.field).repeated = {
    max_items: 50,
    items: {string: {min_len: 1, max_len: 100}}
  }];
  optional AccommodationPreferences accommodation_preferences = 16;
  optional DiningPreferences dining_preferences = 17;
  optional ActivityPreferences activity_preferences = 18;
  optional ItineraryPreferences itinerary_preferences = 19;
}

// GetUserPreferenceProfilesRequest for retrieving user preference profiles
message GetUserPreferenceProfilesRequest {
  optional string user_id = 1 [(buf.validate.field) = {
    ignore: IGNORE_IF_ZERO_VALUE,
    string: {min_len: 1, max_len: 100}
  }];
}

// GetUserPreferenceProfilesResponse for preference profiles retrieval
message GetUserPreferenceProfilesResponse {
  repeated UserPreferenceProfile profiles = 1;
}

// ProfileService defines profile-related RPCs
service ProfileService {
  rpc GetUserPreferenceProfiles(GetUserPreferenceProfilesRequest) returns (GetUserPreferenceProfilesResponse);
  rpc CreateUserPreferenceProfile(CreateUserPreferenceProfileRequest) returns (loci.common.Response);
  rpc UpdateUserPreferenceProfile(UpdateUserPreferenceProfileRequest) returns (loci.common.Response);
}
